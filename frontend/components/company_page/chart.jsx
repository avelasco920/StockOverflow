import React from 'react';
import { AuthRoute, ProtectedRoute } from '../../util/route_util';
import { Link, withRouter } from 'react-router-dom';
import Chart from 'chart.js';

import ChartOverlayContainer from './chart_overlay_container';

class ChartComponent extends React.Component {
  constructor(props) {
    super(props);
    // const { chartData } = this.props;
    this.state = {
      imgUrl: "https://github.com/avelasco920/stocks-overflow/blob/master/app/assets/images/chart%20thumbnail/green1.png?raw=true",
      activeId: "1",
      chartPricePoints: ["10.0150", "10.0200", "10.0200", "10.0190", "10.0107", "10.0150", "10.0100", "10.0050", "10.0150", "10.0188", "10.0150", "10.0250", "10.0050", "10.0100", "10.0050", "10.0050", "10.0050", "10.0100", "10.0033", "10.0200", "10.0000", "10.0000", "9.9850", "9.9850", "10.0000", "10.0000", "9.9950", "10.0239", "10.0050", "10.0100", "9.9800", "9.9866", "9.9900", "9.9800", "9.9700", "9.9710", "9.9900", "9.9650", "9.9699", "9.9700", "9.9750", "9.9692", "9.9700", "9.9590", "9.9500", "9.9500", "9.9600", "9.9500", "9.9700", "9.9650", "9.9700", "9.9700", "9.9500", "9.9300", "9.9150", "9.9500", "9.9450", "9.9390", "9.9400", "9.9500", "9.9400", "9.9650", "9.9451", "9.9600", "9.9500", "9.9400", "9.9550", "9.9547", "9.9599", "9.9447", "9.9553", "9.9400", "9.9750", "9.9600", "9.9800", "10.0000", "10.0047", "10.0100", "10.0050", "10.0050", "10.0200", "10.0190", "10.0250", "10.0153", "10.0100", "10.0100", "10.0100", "10.0200", "10.0200", "10.0100", "10.0045", "10.0050", "10.0000", "10.0000", "9.9961", "9.9850", "10.0000", "10.0093", "10.0049", "10.0137"],
      chartTimePoints: ["2017-12-05 14:12:00", "2017-12-05 14:11:00", "2017-12-05 14:10:00", "2017-12-05 14:09:00", "2017-12-05 14:08:00", "2017-12-05 14:07:00", "2017-12-05 14:06:00", "2017-12-05 14:05:00", "2017-12-05 14:04:00", "2017-12-05 14:03:00", "2017-12-05 14:02:00", "2017-12-05 14:01:00", "2017-12-05 14:00:00", "2017-12-05 13:59:00", "2017-12-05 13:58:00", "2017-12-05 13:57:00", "2017-12-05 13:56:00", "2017-12-05 13:55:00", "2017-12-05 13:54:00", "2017-12-05 13:53:00", "2017-12-05 13:52:00", "2017-12-05 13:51:00", "2017-12-05 13:50:00", "2017-12-05 13:49:00", "2017-12-05 13:48:00", "2017-12-05 13:47:00", "2017-12-05 13:46:00", "2017-12-05 13:45:00", "2017-12-05 13:44:00", "2017-12-05 13:43:00", "2017-12-05 13:42:00", "2017-12-05 13:41:00", "2017-12-05 13:40:00", "2017-12-05 13:39:00", "2017-12-05 13:38:00", "2017-12-05 13:37:00", "2017-12-05 13:36:00", "2017-12-05 13:35:00", "2017-12-05 13:34:00", "2017-12-05 13:33:00", "2017-12-05 13:32:00", "2017-12-05 13:31:00", "2017-12-05 13:30:00", "2017-12-05 13:29:00", "2017-12-05 13:28:00", "2017-12-05 13:27:00", "2017-12-05 13:26:00", "2017-12-05 13:25:00", "2017-12-05 13:24:00", "2017-12-05 13:23:00", "2017-12-05 13:22:00", "2017-12-05 13:21:00", "2017-12-05 13:20:00", "2017-12-05 13:19:00", "2017-12-05 13:18:00", "2017-12-05 13:17:00", "2017-12-05 13:16:00", "2017-12-05 13:15:00", "2017-12-05 13:14:00", "2017-12-05 13:13:00", "2017-12-05 13:12:00", "2017-12-05 13:11:00", "2017-12-05 13:10:00", "2017-12-05 13:09:00", "2017-12-05 13:08:00", "2017-12-05 13:07:00", "2017-12-05 13:06:00", "2017-12-05 13:05:00", "2017-12-05 13:04:00", "2017-12-05 13:03:00", "2017-12-05 13:02:00", "2017-12-05 13:01:00", "2017-12-05 13:00:00", "2017-12-05 12:59:00", "2017-12-05 12:58:00", "2017-12-05 12:57:00", "2017-12-05 12:56:00", "2017-12-05 12:55:00", "2017-12-05 12:54:00", "2017-12-05 12:53:00", "2017-12-05 12:52:00", "2017-12-05 12:51:00", "2017-12-05 12:50:00", "2017-12-05 12:49:00", "2017-12-05 12:48:00", "2017-12-05 12:47:00", "2017-12-05 12:46:00", "2017-12-05 12:45:00", "2017-12-05 12:44:00", "2017-12-05 12:43:00", "2017-12-05 12:42:00", "2017-12-05 12:41:00", "2017-12-05 12:40:00", "2017-12-05 12:39:00", "2017-12-05 12:38:00", "2017-12-05 12:37:00", "2017-12-05 12:36:00", "2017-12-05 12:35:00", "2017-12-05 12:34:00", "2017-12-05 12:33:00"]
    };
    this.changeActive = this.changeActive.bind(this);
  }

  componentDidUpdate() {
    const stocksCtx = document.getElementById("companyChart");
    new Chart(stocksCtx, {
      type: 'line',
      data: {
          datasets: [{
              fill: false,
              lineTension: 0.3,
              borderColor: "#08d093",
              borderWidth: 2,
              pointRadius: 1,
              pointStyle: "line",
              data: ["10.0150", "10.0200", "10.0200", "10.0190", "10.0107", "10.0150", "10.0100", "10.0050", "10.0150", "10.0188", "10.0150", "10.0250", "10.0050", "10.0100", "10.0050", "10.0050", "10.0050", "10.0100", "10.0033", "10.0200", "10.0000", "10.0000", "9.9850", "9.9850", "10.0000", "10.0000", "9.9950", "10.0239", "10.0050", "10.0100", "9.9800", "9.9866", "9.9900", "9.9800", "9.9700", "9.9710", "9.9900", "9.9650", "9.9699", "9.9700", "9.9750", "9.9692", "9.9700", "9.9590", "9.9500", "9.9500", "9.9600", "9.9500", "9.9700", "9.9650", "9.9700", "9.9700", "9.9500", "9.9300", "9.9150", "9.9500", "9.9450", "9.9390", "9.9400", "9.9500", "9.9400", "9.9650", "9.9451", "9.9600", "9.9500", "9.9400", "9.9550", "9.9547", "9.9599", "9.9447", "9.9553", "9.9400", "9.9750", "9.9600", "9.9800", "10.0000", "10.0047", "10.0100", "10.0050", "10.0050", "10.0200", "10.0190", "10.0250", "10.0153", "10.0100", "10.0100", "10.0100", "10.0200", "10.0200", "10.0100", "10.0045", "10.0050", "10.0000", "10.0000", "9.9961", "9.9850", "10.0000", "10.0093", "10.0049", "10.0137"]
          }],
          labels: ["2017-12-05 14:12:00", "2017-12-05 14:11:00", "2017-12-05 14:10:00", "2017-12-05 14:09:00", "2017-12-05 14:08:00", "2017-12-05 14:07:00", "2017-12-05 14:06:00", "2017-12-05 14:05:00", "2017-12-05 14:04:00", "2017-12-05 14:03:00", "2017-12-05 14:02:00", "2017-12-05 14:01:00", "2017-12-05 14:00:00", "2017-12-05 13:59:00", "2017-12-05 13:58:00", "2017-12-05 13:57:00", "2017-12-05 13:56:00", "2017-12-05 13:55:00", "2017-12-05 13:54:00", "2017-12-05 13:53:00", "2017-12-05 13:52:00", "2017-12-05 13:51:00", "2017-12-05 13:50:00", "2017-12-05 13:49:00", "2017-12-05 13:48:00", "2017-12-05 13:47:00", "2017-12-05 13:46:00", "2017-12-05 13:45:00", "2017-12-05 13:44:00", "2017-12-05 13:43:00", "2017-12-05 13:42:00", "2017-12-05 13:41:00", "2017-12-05 13:40:00", "2017-12-05 13:39:00", "2017-12-05 13:38:00", "2017-12-05 13:37:00", "2017-12-05 13:36:00", "2017-12-05 13:35:00", "2017-12-05 13:34:00", "2017-12-05 13:33:00", "2017-12-05 13:32:00", "2017-12-05 13:31:00", "2017-12-05 13:30:00", "2017-12-05 13:29:00", "2017-12-05 13:28:00", "2017-12-05 13:27:00", "2017-12-05 13:26:00", "2017-12-05 13:25:00", "2017-12-05 13:24:00", "2017-12-05 13:23:00", "2017-12-05 13:22:00", "2017-12-05 13:21:00", "2017-12-05 13:20:00", "2017-12-05 13:19:00", "2017-12-05 13:18:00", "2017-12-05 13:17:00", "2017-12-05 13:16:00", "2017-12-05 13:15:00", "2017-12-05 13:14:00", "2017-12-05 13:13:00", "2017-12-05 13:12:00", "2017-12-05 13:11:00", "2017-12-05 13:10:00", "2017-12-05 13:09:00", "2017-12-05 13:08:00", "2017-12-05 13:07:00", "2017-12-05 13:06:00", "2017-12-05 13:05:00", "2017-12-05 13:04:00", "2017-12-05 13:03:00", "2017-12-05 13:02:00", "2017-12-05 13:01:00", "2017-12-05 13:00:00", "2017-12-05 12:59:00", "2017-12-05 12:58:00", "2017-12-05 12:57:00", "2017-12-05 12:56:00", "2017-12-05 12:55:00", "2017-12-05 12:54:00", "2017-12-05 12:53:00", "2017-12-05 12:52:00", "2017-12-05 12:51:00", "2017-12-05 12:50:00", "2017-12-05 12:49:00", "2017-12-05 12:48:00", "2017-12-05 12:47:00", "2017-12-05 12:46:00", "2017-12-05 12:45:00", "2017-12-05 12:44:00", "2017-12-05 12:43:00", "2017-12-05 12:42:00", "2017-12-05 12:41:00", "2017-12-05 12:40:00", "2017-12-05 12:39:00", "2017-12-05 12:38:00", "2017-12-05 12:37:00", "2017-12-05 12:36:00", "2017-12-05 12:35:00", "2017-12-05 12:34:00", "2017-12-05 12:33:00"],
      },
      options: {
        legend: {
          display: false,
        },
        scales: {
          xAxes: [{
            display: false
          }],
          yAxes: [{
                display: false,
                gridLines : {
                    display : false
                }
            }]
        },
      }
    });
  }

  changeActive(strNum) {
    const url = `https://github.com/avelasco920/stocks-overflow/blob/master/app/assets/images/chart%20thumbnail/green${strNum}.png?raw=true`;
    this.setState({ imgUrl: url, activeId: strNum });
  }

  render() {
    console.log(this.state);
    const { loading, company } = this.props;
    const { imgUrl } = this.state;
    if (loading) {
      return (<div></div>);
    } else {
      return (
        <div className="chart">
          <div className="line-chart-container">
            <canvas id="companyChart" className="donut-chart"></canvas>
          </div>
          <ChartOverlayContainer changeActive={this.changeActive}/>
          {/* <img
            src={imgUrl}
            className="chart-placeholder"/> */}
        </div>
      );
    }
  }
}

export default ChartComponent;
